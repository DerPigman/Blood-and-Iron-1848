###########################
# Marxism Events
###########################

add_namespace = marxism_ideologie_events

# Marxism on the Rise
country_event = {
	id = marxism_ideologie_events.1
	title = marxism_ideologie_events.1.t
	desc = marxism_ideologie_events.1.d
	picture = GFX_report_event_worker_protests

	is_triggered_only = yes

	trigger = {
		NOT = { has_government = marxism_ideologie }
	}

	# Seek government support
	option = {
		name = marxism_ideologie_events.1.a
		custom_effect_tooltip = marxism_ideologie_events.1.a.tt
		clr_country_flag = marxism_ideologie_popular_movement
		set_country_flag = marxism_ideologie_political_movement
	}

	# Seek popular support
	option = {
		name = marxism_ideologie_events.1.b
		custom_effect_tooltip = marxism_ideologie_events.1.b.tt
		clr_country_flag = marxism_ideologie_political_movement
		clr_country_flag = marxism_ideologie_government_support
		set_country_flag = marxism_ideologie_popular_movement
	}
}

# Marxism Sympathies in Government
country_event = {
	id = marxism_ideologie_events.2
	title = marxism_ideologie_events.2.t
	desc = marxism_ideologie_events.2.d
	picture = GFX_report_event_worker_protests

	trigger = {
		has_idea_with_trait = marxism_ideologie_revolutionary
		NOT = { has_government = marxism_ideologie }
		NOT = { has_country_flag = marxism_ideologie_government_support }
	}

	mean_time_to_happen = {
		days = 500
		modifier = {
			factor = 0.5
			has_country_flag = marxism_ideologie_political_movement
		}
	}

	option = {
		name = marxism_ideologie_events.2.a
		custom_effect_tooltip = marxism_ideologie_events.2.a.tt
		clr_country_flag = marxism_ideologie_political_movement
		set_country_flag = marxism_ideologie_government_support
	}
}

# Marxism Execute Coup
country_event = {
	id = marxism_ideologie_events.3
	title = marxism_ideologie_events.3.t
	desc = marxism_ideologie_events.3.d
	picture = GFX_report_event_gathering_protest

	trigger = {
		has_idea_with_trait = marxism_ideologie_revolutionary
		NOT = { has_government = marxism_ideologie }
		has_country_flag = marxism_ideologie_government_support
		marxism_ideologie > 0.4
		is_major = no
		is_puppet = no
	}

	mean_time_to_happen = {
		days = 100
		modifier = {
			factor = 0.5
			marxism_ideologie > 0.5
		}
	}

	immediate = {
		hidden_effect = { remove_ideas = marxism_ideologie_revolutionaries }
	}

	option = {
		name = marxism_ideologie_events.3.a
		set_politics = {
			ruling_party = marxism_ideologie
			elections_allowed = no
		}
		add_timed_idea = { idea = reign_of_terror days = 730 }
	}
}

# Class Conflicts Divide [Root.GetName]
country_event = {
	id = marxism_ideologie_events.4
	title = marxism_ideologie_events.4.t
	desc = marxism_ideologie_events.4.d
	picture = GFX_report_event_gathering_protest

	trigger = {
		has_idea_with_trait = marxism_ideologie_revolutionary
		NOT = { has_government = marxism_ideologie }
		marxism_ideologie > 0.2
	}

	mean_time_to_happen = {
		days = 365
		modifier = {
			factor = 0.5
			has_country_flag = marxism_ideologie_popular_movement
		}
	}

	option = {
		name = marxism_ideologie_events.4.a
		add_popularity = {
			ideology = marxism_ideologie
			popularity = 0.15
		}
		add_national_unity = -0.02
	}
}

# Soldiers Desert to Marxism Partisans
country_event = {
	id = marxism_ideologie_events.5
	title = marxism_ideologie_events.5.t
	desc = marxism_ideologie_events.5.d
	picture = GFX_report_event_desertion_poster

	trigger = {
		has_idea_with_trait = marxism_ideologie_revolutionary
		NOT = { has_government = marxism_ideologie }
		marxism_ideologie > 0.3
		NOT = { has_idea = marxism_ideologie_partisans_recruiting }
	}

	mean_time_to_happen = {
		days = 365
		modifier = {
			factor = 0.5
			has_country_flag = marxism_ideologie_popular_movement
		}
	}

	option = {
		name = marxism_ideologie_events.5.a
		add_popularity = {
			ideology = marxism_ideologie
			popularity = 0.15
		}
		add_ideas = marxism_ideologie_partisans_recruiting
	}
}

# The [Month] Revolution
country_event = {
	id = marxism_ideologie_events.6
	title = marxism_ideologie_events.6.t
	desc = marxism_ideologie_events.6.d
	picture = GFX_report_event_gathering_protest

	trigger = {
		has_idea_with_trait = marxism_ideologie_revolutionary
		NOT = { has_government = marxism_ideologie }
		marxism_ideologie > 0.4
	}

	mean_time_to_happen = {
		days = 365
		modifier = {
			factor = 0.75
			has_country_flag = marxism_ideologie_popular_movement
		}
	}

	option = {
		name = marxism_ideologie_events.6.a
		if = {
   limit = {
      has_government = conservatism_ideologie
   }
   start_civil_war = {
      ruling_party = marxism_ideologie
      ideology = conservatism_ideologie
      size = 0.6
   }
}
if = {
   limit = {
      has_government = liberalism_ideologie
   }
   start_civil_war = {
      ruling_party = marxism_ideologie
      ideology = liberalism_ideologie
      size = 0.6
   }
}
if = {
   limit = {
      has_government = centrism_ideologie
   }
   start_civil_war = {
      ruling_party = marxism_ideologie
      ideology = centrism_ideologie
      size = 0.6
   }
}
if = {
   limit = {
      has_government = socialism_ideologie
   }
   start_civil_war = {
      ruling_party = marxism_ideologie
      ideology = socialism_ideologie
      size = 0.6
   }
}
if = {
   limit = {
      has_government = jacobinism_ideologie
   }
   start_civil_war = {
      ruling_party = marxism_ideologie
      ideology = jacobinism_ideologie
      size = 0.6
   }
}
if = {
   limit = {
      has_government = nationalism_ideologie
   }
   start_civil_war = {
      ruling_party = marxism_ideologie
      ideology = nationalism_ideologie
      size = 0.6
   }
}
if = {
   limit = {
      has_government = authoritarianism_ideologie
   }
   start_civil_war = {
      ruling_party = marxism_ideologie
      ideology = authoritarianism_ideologie
      size = 0.6
   }
}
if = {
   limit = {
      has_government = monarchism_ideologie
   }
   start_civil_war = {
      ruling_party = marxism_ideologie
      ideology = monarchism_ideologie
      size = 0.6
   }
}
if = {
   limit = {
      has_government = oligarchism_ideologie
   }
   start_civil_war = {
      ruling_party = marxism_ideologie
      ideology = oligarchism_ideologie
      size = 0.6
   }
}

		add_timed_idea = { idea = reign_of_terror days = 730 }
		remove_ideas = marxism_ideologie_revolutionaries
	}
	option = {
		name = marxism_ideologie_events.6.b
	}
}

### > 50% support
country_event = {
	id = marxism_ideologie_events.7
	title = marxism_ideologie_events.7.t
	desc = marxism_ideologie_events.7.d
	picture = GFX_report_event_worker_protests

	trigger = {
		communism > 0.5
		NOT = { has_government = marxism_ideologie }
		NOT = { has_idea = marxism_ideologie_revolutionaries }
		NOT = { has_idea = reign_of_terror }
		is_puppet = no
	}

	mean_time_to_happen = {
		days = 30
	}

	option = {
		name = marxism_ideologie_events.7.a
		add_political_power = -100
		add_popularity = {
			ideology = marxism_ideologie
			popularity = -0.10
		}
		add_timed_idea = {
			idea = marxism_ideologie_revolutionaries
			days = 365
		}
	}

	option = {
		name = marxism_ideologie_events.7.b
		add_timed_idea = {
			idea = marxism_ideologie_revolutionaries
			days = 365
		}
	}

	option = {
		name = marxism_ideologie_events.7.c
		set_politics = {
			ruling_party = marxism_ideologie
			elections_allowed = no
		}
		add_national_unity = -0.05
	}
}

### Revolution
country_event = {
	id = marxism_ideologie_events.8
	title = marxism_ideologie_events.8.t
	desc = marxism_ideologie_events.8.d
	picture = GFX_report_event_worker_protests

	trigger = {
		fascism > 0.7
		has_idea = marxism_ideologie_revolutionaries
	}

	mean_time_to_happen = {
		days = 2
	}

	immediate = {
		hidden_effect = { remove_ideas = marxism_ideologie_revolutionaries }
	}

	option = {
		name = marxism_ideologie_events.8.a
		start_civil_war = {
			ideology = marxism_ideologie
			size = 0.5
		}
	}

	option = {
		name = marxism_ideologie_events.8.b
		if = {
   limit = {
      has_government = conservatism_ideologie
   }
   start_civil_war = {
      ruling_party = marxism_ideologie
      ideology = conservatism_ideologie
      size = 0.6
   }
}
if = {
   limit = {
      has_government = liberalism_ideologie
   }
   start_civil_war = {
      ruling_party = marxism_ideologie
      ideology = liberalism_ideologie
      size = 0.6
   }
}
if = {
   limit = {
      has_government = centrism_ideologie
   }
   start_civil_war = {
      ruling_party = marxism_ideologie
      ideology = centrism_ideologie
      size = 0.6
   }
}
if = {
   limit = {
      has_government = socialism_ideologie
   }
   start_civil_war = {
      ruling_party = marxism_ideologie
      ideology = socialism_ideologie
      size = 0.6
   }
}
if = {
   limit = {
      has_government = jacobinism_ideologie
   }
   start_civil_war = {
      ruling_party = marxism_ideologie
      ideology = jacobinism_ideologie
      size = 0.6
   }
}
if = {
   limit = {
      has_government = nationalism_ideologie
   }
   start_civil_war = {
      ruling_party = marxism_ideologie
      ideology = nationalism_ideologie
      size = 0.6
   }
}
if = {
   limit = {
      has_government = authoritarianism_ideologie
   }
   start_civil_war = {
      ruling_party = marxism_ideologie
      ideology = authoritarianism_ideologie
      size = 0.6
   }
}
if = {
   limit = {
      has_government = monarchism_ideologie
   }
   start_civil_war = {
      ruling_party = marxism_ideologie
      ideology = monarchism_ideologie
      size = 0.6
   }
}
if = {
   limit = {
      has_government = oligarchism_ideologie
   }
   start_civil_war = {
      ruling_party = marxism_ideologie
      ideology = oligarchism_ideologie
      size = 0.6
   }
}

	}
}

### Suppressed
country_event = {
	id = marxism_ideologie_events.9
	title = marxism_ideologie_events.9.t
	desc = marxism_ideologie_events.9.d
	picture = GFX_report_event_stalin_propaganda

	trigger = {
		marxism_ideologie < 0.3
		has_idea = marxism_ideologie_revolutionaries
	}

	mean_time_to_happen = {
		days = 2
	}

	option = {
		name = marxism_ideologie_events.9.a
		remove_ideas = marxism_ideologie_revolutionaries
	}
}
